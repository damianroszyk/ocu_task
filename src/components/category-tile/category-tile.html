<div
    class="category-tile"
    ui-sref="category($ctrl.category.stateParams)"
    ng-class="{
        'category-tile--featured': $ctrl.category.featured,
		'category-tile--expanded': $ctrl.category.expanded
    }">
	<div class="category-tile__image">
		<img ng-src="{{::$ctrl.category.image}}" />
	</div>
    <div class="category-tile-meta">
		<img
			class="category-tile__icon"
			ng-src="{{::$ctrl.category.icon}}" />
		<h4 class="category-tile__title text--xl text--normal">
	        {{::$ctrl.category.name}}
		</h4>
    </div>
    <button
        class="category-tile__control category-tile__control--plus-white"
        ng-if="::$ctrl.category.hasPlaylists === true"
        ng-click="$ctrl.toggleCategoryExpand(false, $event)">
    </button>
    <div
        class="category-tile__subcategories animated"
		click-outside="$ctrl.toggleCategoryExpand(true)"
        ng-if="$ctrl.category.expanded">
		<button
	        class="category-tile__control category-tile__control--close-black"
	        ng-click="$ctrl.toggleCategoryExpand(true, $event)">
	    </button>
		<h5 class="subcategories-tile__title">
			<strong>
				Top {{::$ctrl.category.children.length}}
			</strong>
			{{::$ctrl.category.name}} subcategories
		</h5>
        <ul class="subcategories-list">
            <li
				class="subcategories-list-element"
				ng-repeat="subcategory in ::$ctrl.category.children | limitTo: 5 track by $index"
				ng-click="$event.stopPropagation()"
				ui-sref="category(subcategory.stateParams)">
				<p class="subcategories-list-element__title">
					{{::$index + 1}}. {{::subcategory.name}}
				</p>
				<span class="subcategories-list-element__description">
					Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet.
					Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet.
				</span>
            </li>
        </ul>
		<button
			class="btn-circled subcategories__control"
			ui-sref="category($ctrl.category.stateParams)">
			See all {{::$ctrl.category.name}} subcategories
		</button>
    </div>
</div>
