<div
    class="category-tile"
    ui-sref="category($ctrl.category.stateParams)"
    ng-class="{
        'category-tile--featured': $ctrl.category.featured
    }">
    <img
        class="category-tile__image"
        ng-src="{{::$ctrl.category.imageUrl}}" />
    <h4 class="category-tile__title">
        {{::$ctrl.category.name}}
    </h4>
    <button
        class="category-tile__control"
        ng-if="::$ctrl.category.children.length"
        ng-click="$ctrl.toggleCategoryExpand($ctl.category.expanded, $event)">
        <span ng-if="!$ctrl.category.expanded">
            &plus;
        </span>
        <span ng-if="$ctrl.category.expanded">
            x
        </span>
    </button>
    <div
        class="category-tile__subcategories"
		click-outside="$ctrl.toggleCategoryExpand(true)"
        ng-if="$ctrl.category.expanded">
        <ul class="subcategories-list">
            <li ng-repeat="subcategory in ::$ctrl.category.children">
                <a
                    class="subcategories-list__element"
                    ng-click="$event.stopPropagation()"
                    ui-sref="category(subcategory.stateParams)">
                    {{::subcategory.name}}
                </a>
            </li>
        </ul>
    </div>
</div>
