<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Napster channel</title>
  </head>
  <body>
    <script>
	    (function() {
	      var params = {};
	      window.location.search.replace('?', '').split('&').forEach(function(kv) {
	        var spl = kv.indexOf('=');
	        if (spl != -1) {
	          params[kv.substring(0, spl)] = decodeURIComponent(kv.substring(spl+1));
	        }
	      });

	      if (params.code) {
	        window.opener.postMessage(JSON.stringify({
	          type:'temporary_code',
	          temporary_code: params.code
	        }), window.location.origin);
	        window.close();
		} else if (params.error) {
			window.opener.postMessage(JSON.stringify({
	          type:'error',
	          error: params.error
	        }), window.location.origin);
	        window.close();
		}
	    })();
	</script>
  </body>
</html>
